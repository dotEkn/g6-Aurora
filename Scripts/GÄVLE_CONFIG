# CONFIGS GÄVLE HK
# ROUTER

## R1
conf t
hostname R1-HK
no ip domain-lookup
ip domain-name aurora.local

! WAN
interface GigabitEthernet0/0/0
 description WAN_TO_ISP
 ip address 203.0.113.2 255.255.255.252
 ip nat outside
 no shut

ip route 0.0.0.0 0.0.0.0 203.0.113.1

! TRANSIT (VLAN 5 via SW1)
interface GigabitEthernet0/0/1
 description TRANSIT_TO_SW1
 ip address 10.10.5.2 255.255.255.0
 ip nat inside
 no shut

! OSPF mot interna routrar
router ospf 10
 router-id 1.1.1.1
 passive-interface default
 no passive-interface GigabitEthernet0/0/1
 network 10.10.5.0 0.0.0.255 area 0
 default-information originate

! NAT för interna nät
access-list 10 permit 10.10.10.0 0.0.0.255
access-list 10 permit 10.10.40.0 0.0.0.255
access-list 10 permit 10.10.99.0 0.0.0.255
access-list 10 permit 172.16.20.0 0.0.0.255
access-list 10 permit 172.16.25.0 0.0.0.255
access-list 10 permit 172.16.30.0 0.0.0.255
access-list 10 permit 172.16.35.0 0.0.0.255

ip nat inside source list 10 interface GigabitEthernet0/0/0 overload

! Port-forward HTTP till webbserver i DMZ
ip nat inside source static tcp 10.10.10.10 80 interface GigabitEthernet0/0/0 80

end
wr

## R2
conf t
hostname R2-HK
no ip domain-lookup
ip domain-name aurora.local

! ====== TRUNK till SW1 (bär VLAN 5 + VLAN 10) ======
interface GigabitEthernet0/0/0
 description TRUNK_TO_SW1
 no ip address
 no shut

interface GigabitEthernet0/0/0.5
 encapsulation dot1Q 5
 ip address 10.10.5.1 255.255.255.0

interface GigabitEthernet0/0/0.10
 encapsulation dot1Q 10
 ip address 10.10.10.2 255.255.255.0
 standby 10 ip 10.10.10.1
 standby 10 priority 110
 standby 10 preempt

! ====== TRUNK till SW2 (campus VLAN) ======
interface GigabitEthernet0/0/1
 description TRUNK_TO_SW2
 no ip address
 no shut

interface GigabitEthernet0/0/1.20
 encapsulation dot1Q 20
 ip address 172.16.20.2 255.255.255.0
 standby 20 ip 172.16.20.1
 standby 20 priority 110
 standby 20 preempt
 ip helper-address 10.10.40.41

interface GigabitEthernet0/0/1.25
 encapsulation dot1Q 25
 ip address 172.16.25.2 255.255.255.0
 standby 25 ip 172.16.25.1
 standby 25 priority 110
 standby 25 preempt
 ip helper-address 10.10.40.41

interface GigabitEthernet0/0/1.30
 encapsulation dot1Q 30
 ip address 172.16.30.2 255.255.255.0
 standby 30 ip 172.16.30.1
 standby 30 priority 110
 standby 30 preempt
 ip helper-address 10.10.40.41

interface GigabitEthernet0/0/1.35
 encapsulation dot1Q 35
 ip address 172.16.35.2 255.255.255.0
 standby 35 ip 172.16.35.1
 standby 35 priority 110
 standby 35 preempt
 ip helper-address 10.10.40.41

interface GigabitEthernet0/0/1.40
 encapsulation dot1Q 40
 ip address 10.10.40.2 255.255.255.0
 standby 40 ip 10.10.40.1
 standby 40 priority 110
 standby 40 preempt

interface GigabitEthernet0/0/1.99
 encapsulation dot1Q 99
 ip address 10.10.99.2 255.255.255.0
 standby 99 ip 10.10.99.1
 standby 99 priority 110
 standby 99 preempt

! ====== OSPF ======
router ospf 10
 router-id 2.2.2.2
 passive-interface default
 no passive-interface GigabitEthernet0/0/0.5
 network 10.10.5.0 0.0.0.255 area 0
 network 10.10.10.0 0.0.0.255 area 0
 network 10.10.40.0 0.0.0.255 area 0
 network 10.10.99.0 0.0.0.255 area 0
 network 172.16.20.0 0.0.0.255 area 0
 network 172.16.25.0 0.0.0.255 area 0
 network 172.16.30.0 0.0.0.255 area 0
 network 172.16.35.0 0.0.0.255 area 0

end
wr
## R3
conf t
hostname R3-HK
no ip domain-lookup
ip domain-name aurora.local

! ====== TRUNK till SW1 (bär VLAN 5 + VLAN 10) ======
interface GigabitEthernet0/0/0
 description TRUNK_TO_SW1
 no ip address
 no shut

interface GigabitEthernet0/0/0.5
 encapsulation dot1Q 5
 ip address 10.10.5.3 255.255.255.0

interface GigabitEthernet0/0/0.10
 encapsulation dot1Q 10
 ip address 10.10.10.3 255.255.255.0
 standby 10 ip 10.10.10.1
 standby 10 priority 100
 standby 10 preempt

! ====== TRUNK till SW3 (campus VLAN) ======
interface GigabitEthernet0/0/1
 description TRUNK_TO_SW3
 no ip address
 no shut

interface GigabitEthernet0/0/1.20
 encapsulation dot1Q 20
 ip address 172.16.20.3 255.255.255.0
 standby 20 ip 172.16.20.1
 standby 20 priority 100
 standby 20 preempt
 ip helper-address 10.10.40.41

interface GigabitEthernet0/0/1.25
 encapsulation dot1Q 25
 ip address 172.16.25.3 255.255.255.0
 standby 25 ip 172.16.25.1
 standby 25 priority 100
 standby 25 preempt
 ip helper-address 10.10.40.41

interface GigabitEthernet0/0/1.30
 encapsulation dot1Q 30
 ip address 172.16.30.3 255.255.255.0
 standby 30 ip 172.16.30.1
 standby 30 priority 100
 standby 30 preempt
 ip helper-address 10.10.40.41

interface GigabitEthernet0/0/1.35
 encapsulation dot1Q 35
 ip address 172.16.35.3 255.255.255.0
 standby 35 ip 172.16.35.1
 standby 35 priority 100
 standby 35 preempt
 ip helper-address 10.10.40.41

interface GigabitEthernet0/0/1.40
 encapsulation dot1Q 40
 ip address 10.10.40.3 255.255.255.0
 standby 40 ip 10.10.40.1
 standby 40 priority 100
 standby 40 preempt

interface GigabitEthernet0/0/1.99
 encapsulation dot1Q 99
 ip address 10.10.99.3 255.255.255.0
 standby 99 ip 10.10.99.1
 standby 99 priority 100
 standby 99 preempt

! ====== OSPF ======
router ospf 10
 router-id 3.3.3.3
 passive-interface default
 no passive-interface GigabitEthernet0/0/0.5
 network 10.10.5.0 0.0.0.255 area 0
 network 10.10.10.0 0.0.0.255 area 0
 network 10.10.40.0 0.0.0.255 area 0
 network 10.10.99.0 0.0.0.255 area 0
 network 172.16.20.0 0.0.0.255 area 0
 network 172.16.25.0 0.0.0.255 area 0
 network 172.16.30.0 0.0.0.255 area 0
 network 172.16.35.0 0.0.0.255 area 0

end
wr

# SWITCHAR

## SW1
conf t
hostname SW1-HK
no ip domain-lookup
vtp mode transparent
spanning-tree mode rapid-pvst

vlan 5
 name TRANSIT
vlan 10
 name DMZ
vlan 999
 name BLACKHOLE

! Management på VLAN 5
interface Vlan5
 ip address 10.10.5.11 255.255.255.0
 no shut
ip default-gateway 10.10.5.1

! R1 (access VLAN 5)
interface Gi1/0/15
 description to_R1_G0/0/1
 switchport mode access
 switchport access vlan 5
 spanning-tree portfast

! R2 (TRUNK: VLAN 5 + VLAN 10)
interface Gi1/0/16
 description to_R2_G0/0/0
 switchport mode trunk
 switchport trunk native vlan 999
 switchport trunk allowed vlan 5,10

! R3 (TRUNK: VLAN 5 + VLAN 10)
interface Gi1/0/17
 description to_R3_G0/0/0
 switchport mode trunk
 switchport trunk native vlan 999
 switchport trunk allowed vlan 5,10

! FTP i DMZ (access VLAN 10)
interface Gi1/0/1
 description FTP_DMZ
 switchport mode access
 switchport access vlan 10
 spanning-tree portfast

end
wr

## SW2
conf t
hostname SW2-HK
no ip domain-lookup
vtp mode transparent
spanning-tree mode rapid-pvst

vlan 20
 name Konferens
vlan 25
 name Konferens_AP
vlan 30
 name Kontor
vlan 35
 name Kontor_AP
vlan 40
 name Server
vlan 99
 name Native
vlan 999
 name SVARTHÅL

interface Vlan99
 ip address 10.10.99.12 255.255.255.0
 no shut
ip default-gateway 10.10.99.1

! Trunk till R2
interface Gi1/0/15
 description trunk_to_R2_G0/0/1
 switchport mode trunk
 switchport trunk native vlan 999
 switchport trunk allowed vlan 20,25,30,35,40,99

! Trunk till SW3
interface range Gi1/0/21-22
 description trunk_to_SW3
 switchport mode trunk
 switchport trunk native vlan 999
 switchport trunk allowed vlan 20,25,30,35,40,99

! Trunk till SW4
interface range Gi1/0/23-24
 description trunk_to_SW4
 switchport mode trunk
 switchport trunk native vlan 999
 switchport trunk allowed vlan 20,25,30,35,40,99

! Exempel accessport: Server VLAN 40
interface Gi1/0/1
 description SERVERS_VLAN40
 switchport mode access
 switchport access vlan 40
 spanning-tree portfast
 spanning-tree bpduguard enable

end
wr

## SW3
conf t
hostname SW3-HK
no ip domain-lookup
vtp mode transparent
spanning-tree mode rapid-pvst

vlan 20
 name Konferens
vlan 25
 name Konferens_AP
vlan 30
 name Kontor
vlan 35
 name Kontor_AP
vlan 40
 name Server
vlan 99
 name Native
vlan 999
 name SVARTHÅL

interface Vlan99
 ip address 10.10.99.13 255.255.255.0
 no shut
ip default-gateway 10.10.99.1

! Trunk till R3
interface Gi1/0/15
 description trunk_to_R3_G0/0/1
 switchport mode trunk
 switchport trunk native vlan 999
 switchport trunk allowed vlan 20,25,30,35,40,99

! Trunk till SW2
interface range Gi1/0/21-22
 description trunk_to_SW2
 switchport mode trunk
 switchport trunk native vlan 999
 switchport trunk allowed vlan 20,25,30,35,40,99

! Trunk till SW4
interface range Gi1/0/23-24
 description trunk_to_SW4
 switchport mode trunk
 switchport trunk native vlan 999
 switchport trunk allowed vlan 20,25,30,35,40,99

! Konferens-PC VLAN 20
interface Gi1/0/1
 description KONFERENS_PC
 switchport mode access
 switchport access vlan 20
 spanning-tree portfast
 spanning-tree bpduguard enable

! AP1 VLAN 25
interface Gi1/0/16
 description AP1_KONFERENS_GAST
 switchport mode access
 switchport access vlan 25
 spanning-tree portfast
 spanning-tree bpduguard enable

end
wr

## SW4
conf t
hostname SW4-HK
no ip domain-lookup
vtp mode transparent
spanning-tree mode rapid-pvst

vlan 20
 name Konferens
vlan 25
 name Konferens_AP
vlan 30
 name Kontor
vlan 35
 name Kontor_AP
vlan 40
 name Server
vlan 99
 name Native
vlan 999
 name SVARTHÅL

interface Vlan99
 ip address 10.10.99.14 255.255.255.0
 no shut
ip default-gateway 10.10.99.1

! Trunk till SW2
interface range Gi1/0/21-22
 description trunk_to_SW2
 switchport mode trunk
 switchport trunk native vlan 999
 switchport trunk allowed vlan 20,25,30,35,40,99

! Trunk till SW3
interface range Gi1/0/23-24
 description trunk_to_SW3
 switchport mode trunk
 switchport trunk native vlan 999
 switchport trunk allowed vlan 20,25,30,35,40,99

! Kontor-PC VLAN 30
interface range Gi1/0/1-14
 description KONTOR_PC
 switchport mode access
 switchport access vlan 30
 spanning-tree portfast
 spanning-tree bpduguard enable

! AP2 VLAN 35
interface Gi1/0/15
 description AP2_KONTOR_WIFI
 switchport mode access
 switchport access vlan 35
 spanning-tree portfast
 spanning-tree bpduguard enable

end
wr
